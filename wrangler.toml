name = "substore-sync"
main = "src/index.ts"
compatibility_date = "2024-02-08"

# KV 命名空间绑定
[[kv_namespaces]]
binding = "KV"
id = "YOUR_KV_NAMESPACE_ID"
preview_id = "YOUR_PREVIEW_KV_ID"

# 环境变量（生产环境通过 wrangler secret 设置）
[vars]
SUBSTORE_SHARE_BASE = "https://your-substore-domain.com"
SUBSTORE_COLLECTION_NAME = "your-collection-name"
SUBSTORE_TOKEN = "your-share-token"
SUBSTORE_DOWNLOAD_TIMEOUT = "15000"
ADMIN_USERNAME = "admin"

# 开发环境变量（仅用于本地开发）
[env.dev.vars]
AUTH_SECRET = "dev-secret-at-least-32-characters-long"
ADMIN_PASSWORD = "dev-password"
SYNC_SECRET = "dev-sync-secret"

# 定时任务触发器（Cron）
[triggers]
crons = ["*/30 * * * *"]  # 每 30 分钟执行一次自动同步
